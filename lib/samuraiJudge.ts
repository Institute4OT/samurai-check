// 統一されたコード：samuraiJudge.ts
export type SamuraiType =
  | "真田幸村型"
  | "織田信長型"
  | "豊臣秀吉型"
  | "徳川家康型"
  | "上杉謙信型"
  | "斎藤道三型"
  | "今川義元型";

export interface CategoryScores {
  "アップデート力": number;
  "コミュ力誤差": number;
  "ジェネギャップ感覚": number;
  "組織進化阻害": number;
  "無自覚ハラスメント傾向": number;
  "権限委譲・構造健全度": number;
}

export const samuraiDescriptions: Record<SamuraiType, string> = {
  "真田幸村型": "全体的に高得点のバランス型。挑戦も安定もこなす理想の経営者タイプ。",
  "織田信長型": "攻めの判断が速く、変化を恐れないチャレンジャー。AI時代の勝ち筋を先読みする。",
  "徳川家康型": "組織の土台を堅実に整え、信頼で築く安定政権型。改革よりも継続が強み。",
  "豊臣秀吉型": "人たらし力と突破力を兼ね備えた柔軟型。現場の声に敏感で、巻き込み型のリーダー。",
  "斎藤道三型": "野心と改革精神に満ちた一匹狼型。周囲と衝突しやすいが、独自の道を切り拓く。",
  "上杉謙信型": "倫理観が強く、精神性と信頼を大切にするリーダー。組織の\"軸\"を支える存在。",
  "今川義元型": "今のままでは時代に取り残される恐れが…。まずは現状把握と意識変革から。"
};

export function judgeSamuraiType(scores: CategoryScores): SamuraiType {
  const {
    アップデート力,
    コミュ力誤差,
    ジェネギャップ感覚,
    組織進化阻害,
    無自覚ハラスメント傾向,
    "権限委譲・構造健全度": delegationHealth,
  } = scores;

  const avgScore =
    (アップデート力 +
      コミュ力誤差 +
      ジェネギャップ感覚 +
      組織進化阻害 +
      無自覚ハラスメント傾向 +
      delegationHealth) /
    6;

  // ① 理想型：真田幸村型
  if (
    アップデート力 > 2.4 &&
    ジェネギャップ感覚 > 2.4 &&
    delegationHealth > 2.4 &&
    組織進化阻害 < 1.5 &&
    無自覚ハラスメント傾向 < 1.5
  ) {
    return "真田幸村型";
  }

  // ② 停滞型：今川義元型
  if (avgScore < 1.4) {
    return "今川義元型";
  }

  // ③ 独裁型：斎藤道三型
  if (
    アップデート力 > 2.3 &&
    組織進化阻害 > 2 &&
    無自覚ハラスメント傾向 > 2
  ) {
    return "斎藤道三型";
  }

  // ④ 革新型：織田信長型
  if (
    アップデート力 > 2.4 &&
    ジェネギャップ感覚 > 2.2 &&
    無自覚ハラスメント傾向 < 2
  ) {
    return "織田信長型";
  }

  // ⑤ 高潔型：上杉謙信型
  if (
    コミュ力誤差 > 2.5 &&           // 社員との信頼関係が築ける
    ジェネギャップ感覚 > 2.5 &&    // 世代間ギャップを意識し、柔軟に対応できる
    無自覚ハラスメント傾向 < 1.5 &&  // 部下や社員を尊重し、ハラスメントがない
    アップデート力 < 2.0             // 新しいアプローチに慎重、変化に慎重
  ) {
    return "上杉謙信型";
  }

  // ⑥ 慎重型：徳川家康型
  if (delegationHealth > 2.5 && アップデート力 < 1.8) {
    return "徳川家康型";
  }

  // ⑦ 共創型：豊臣秀吉型（バランス型含む）
  if (
    コミュ力誤差 > 2.2 &&
    delegationHealth > 2 &&
    組織進化阻害 < 2.2
  ) {
    return "豊臣秀吉型";
  }

  // ⑧ fallback：秀吉型に寄せる
  return "豊臣秀吉型";
}
